/* INTERNET OLYMPICS 2 - Blind Box Board Styles (Fixed for 25 boxes) */

* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Tahoma','Arial',sans-serif; overflow:hidden; background:#000; }

.game-container {
  width:100vw; height:100vh; position:relative;
  background-size:cover; background-position:center; background-repeat:no-repeat; overflow:hidden;
}

/* Turn Indicator */
.turn-indicator {
  position:absolute; top:20px; left:50%; transform:translateX(-50%);
  background:rgba(255,255,255,.95); border:3px solid #0054e3; padding:15px 30px;
  font-size:1.25rem; font-weight:700; box-shadow:0 4px 10px rgba(0,0,0,.3); z-index:100;
  animation:pulse 2s infinite;
}
.turn-indicator.team-1 { border-color:#ff6b6b; color:#ff6b6b; }
.turn-indicator.team-2 { border-color:#4ecdc4; color:#4ecdc4; }

/* Score Bar */
.score-bar {
  position:absolute; bottom:20px; left:50%; transform:translateX(-50%);
  display:flex; gap:24px; z-index:100;
}
.team-score {
  background:rgba(255,255,255,.95); border:3px solid #0054e3; padding:8px 16px;
  display:flex; flex-direction:column; align-items:center; box-shadow:0 4px 10px rgba(0,0,0,.3);
}
.team-score.team-1 { border-color:#ff6b6b; }
.team-score.team-2 { border-color:#4ecdc4; }
.team-name { font-size:.85rem; font-weight:700; margin-bottom:4px; }
.team-points { font-size:1.25rem; font-weight:700; }

/* 25-box grid: 5 columns Ã— 5 rows */
.blind-box-container {
  position:absolute; top:70px; left:10px; right:10px; bottom:80px;
  display:grid; grid-template-columns:repeat(5, 1fr); grid-template-rows:repeat(5, 1fr);
  gap:min(1.5vw, 15px); padding:10px; align-items:center; justify-items:center;
  overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling:touch;
}

/* Boxes */
.blind-box {
  position:relative; cursor:pointer; transition:.2s ease; transform-style:preserve-3d;
  width:min(18vw, 140px); height:min(18vw, 140px); aspect-ratio:1;
}
.blind-box img { 
  width:100%; height:100%; object-fit:contain; 
  filter:drop-shadow(0 5px 10px rgba(0,0,0,.3)); 
}
.blind-box:hover:not(.selected):not(.opened):not(.unavailable) { 
  transform:translateY(-6px) scale(1.04); 
  filter:brightness(1.06); 
}
.blind-box.selected { 
  animation:glow 1s infinite; 
  transform:scale(1.08); 
}
.blind-box.pending {
  opacity:.7;
  filter:sepia(100%) hue-rotate(30deg);
}
.blind-box.opened { 
  opacity:.35; 
  pointer-events:none; 
  filter:grayscale(100%); 
}
.blind-box.unavailable { 
  opacity:.3; 
  cursor:not-allowed; 
  pointer-events:none; 
}

.blind-box.claimed-team-1 { 
  filter:grayscale(100%) sepia(100%) hue-rotate(320deg); 
}
.blind-box.claimed-team-2 { 
  filter:grayscale(100%) sepia(100%) hue-rotate(160deg); 
}

@keyframes glow {
  0%,100% { filter:drop-shadow(0 0 20px #ffff00); transform:scale(1.08); }
  50% { filter:drop-shadow(0 0 36px #ffff00); transform:scale(1.12); }
}
@keyframes pulse {
  0%,100% { transform:translateX(-50%) scale(1); }
  50% { transform:translateX(-50%) scale(1.05); }
}

/* Modal base */
.modal { 
  display:none; position:fixed; inset:0; background:rgba(0,0,0,.7); z-index:1000; 
}
.modal-content { 
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); 
}
.xp-window {
  background:#ece9d8; border:3px solid #0054e3; border-radius:8px 8px 0 0; 
  min-width:450px; max-width:90vw;
  box-shadow:5px 5px 20px rgba(0,0,0,.5);
}
.xp-window-header {
  background:linear-gradient(180deg,#0054e3,#0043b8); color:#fff; padding:8px;
  display:flex; justify-content:space-between; align-items:center; 
  border-radius:5px 5px 0 0;
}
.xp-window-title { font-weight:700; font-size:14px; }
.xp-close { 
  background:#e04343; color:#fff; border:2px solid #fff; 
  border-radius:3px; width:25px; height:25px; cursor:pointer; font-weight:700; 
}
.xp-window-body { 
  padding:30px; background:#fff; text-align:center; 
}

/* Waiting / Reveal / Special */
.loading-spinner { 
  font-size:3rem; animation:spin 2s linear infinite; margin:16px 0; 
}
@keyframes spin { 
  from{transform:rotate(0)} to{transform:rotate(360deg)} 
}

.reveal-animation img { 
  width:240px; height:240px; object-fit:contain; 
  margin:12px auto; animation:bounce .5s; 
}
#dollName { 
  font-size:1.6rem; color:#0054e3; margin-bottom:12px; 
}

.challenge-selection { margin-top:16px; }
.challenge-selection p { 
  margin-bottom:12px; font-style:italic; color:#666; 
}

.xp-button {
  background:linear-gradient(180deg,#fff,#e0e0e0); 
  border:2px solid #999; padding:12px 18px; cursor:pointer;
  font-size:14px; border-radius:3px; 
  box-shadow:2px 2px 0 rgba(0,0,0,.2); 
  margin:0 8px; transition:.1s;
}
.xp-button:hover { 
  background:linear-gradient(180deg,#f0f0f0,#d0d0d0); 
  transform:translateY(-2px); 
}
.xp-button:active { 
  transform:translate(1px,1px); 
  box-shadow:1px 1px 0 rgba(0,0,0,.2); 
}

.team-challenge { 
  background:linear-gradient(180deg,#90ee90,#7dd87d); 
  border-color:#5cb85c; 
}
.individual-challenge { 
  background:linear-gradient(180deg,#ffd700,#e6c200); 
  border-color:#d4af37; 
}
.points { 
  display:block; font-size:1.1rem; font-weight:700; margin-top:4px; 
}

/* Special Card Windows */
.special-window .xp-window-header { 
  background:linear-gradient(180deg,#ff6b6b,#ff4444); 
  animation:flash .5s 3; 
}
.special-window img { 
  width:280px; height:280px; object-fit:contain; margin:12px auto; 
}
#specialTitle { 
  font-size:2rem; color:#ff4444; margin:12px 0; 
  text-transform:uppercase; animation:shake .5s; 
}

.mega-window .xp-window-header { 
  background:linear-gradient(180deg,#ff00ff,#9900ff); 
  animation:flash .5s 3; 
}
.mega-window img { 
  width:280px; height:280px; object-fit:contain; margin:12px auto; 
}
#megaTitle { 
  font-size:2rem; color:#9900ff; margin:12px 0; 
  text-transform:uppercase; animation:shake .5s; 
}

@keyframes flash { 
  0%,100%{opacity:1} 50%{opacity:.5} 
}
@keyframes shake { 
  0%,100%{transform:translateX(0)} 
  25%{transform:translateX(-10px)} 
  75%{transform:translateX(10px)} 
}
@keyframes bounce { 
  0%,100%{transform:translateY(0)} 
  50%{transform:translateY(-14px)} 
}

/* Login */
#error, .error-msg { 
  color:#ff4444; font-size:.9em; margin-top:8px; 
}
#accessCode { 
  width:100%; padding:10px; margin:10px 0; 
  border:2px solid #0054e3; font-size:16px; 
}

/* Mobile - Better responsive layout */
@media (max-width:768px){
  .blind-box-container{ 
    grid-template-columns:repeat(3, 1fr); /* 3 columns on mobile */
    gap:min(2vw,8px); 
    padding:6px; 
    top:56px; 
    bottom:64px; 
  }
  .blind-box{ 
    width:min(28vw, 96px); 
    height:min(28vw, 96px); 
  }
  .score-bar{ 
    gap:8px; 
    bottom:6px; 
  }
  .team-score{ 
    padding:6px 10px; 
    border-width:2px; 
  }
  .team-name{ font-size:.7rem; } 
  .team-points{ font-size:1rem; }
  .turn-indicator{ 
    font-size:.9rem; 
    padding:6px 12px; 
    top:6px; 
    border-width:2px; 
  }
  .xp-window{ 
    min-width:90vw; 
    max-width:95vw; 
  }
  .reveal-animation img { 
    width:180px; 
    height:180px; 
  }
}

@media (max-width:480px){
  .blind-box-container{ 
    grid-template-columns:repeat(2, 1fr); /* 2 columns on very small screens */
  }
  .blind-box{ 
    width:min(42vw, 120px); 
    height:min(42vw, 120px); 
  }
}