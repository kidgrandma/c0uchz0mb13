<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <title>INTERNET OLYMPICS 2</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Prevent iOS bounce */
        html, body {
            position: fixed;
            overflow: hidden;
            width: 100%;
            height: 100%;
            overscroll-behavior: none;
            touch-action: pan-x pan-y;
        }

        body {
            font-family: 'Tahoma', 'Segoe UI', sans-serif;
            background: #87CEEB;
            position: relative;
        }

        /* Blockbuster background */
        .scene-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('assets/entrance/entrance-bg.jpg') center/cover no-repeat;
            filter: brightness(1.1) contrast(1.1);
        }

        /* Windows XP Style Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .welcome-modal.hidden {
            display: none;
        }

        .modal-content {
            background: #ECE9D8;
            border: 2px solid #0054E3;
            border-radius: 8px 8px 0 0;
            max-width: 500px;
            width: 100%;
            box-shadow: 
                0 0 0 1px #003C74,
                2px 2px 5px rgba(0,0,0,0.3),
                inset -1px -1px 0 #716F64,
                inset 1px 1px 0 #FFFFFF;
        }

        /* XP Title Bar */
        .xp-titlebar {
            background: linear-gradient(to bottom, #0054E3 0%, #0046C7 3%, #0036A3 100%);
            padding: 6px;
            border-radius: 6px 6px 0 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .xp-title {
            color: white;
            font-size: 13px;
            font-weight: bold;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.5);
            padding-left: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .xp-title::before {
            content: "⚠";
            font-size: 16px;
            color: #FFD700;
        }

        .xp-buttons {
            display: flex;
            gap: 2px;
        }

        .xp-button {
            width: 21px;
            height: 21px;
            border: 1px solid #003C74;
            border-radius: 3px;
            background: linear-gradient(to bottom, #FFFFFF 0%, #E3E3DB 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-family: 'Marlett', sans-serif;
            font-size: 14px;
            color: #000;
        }

        .xp-button:hover {
            background: linear-gradient(to bottom, #FFE8A6 0%, #FFC73C 100%);
        }

        .xp-button.close::after {
            content: "✕";
            font-weight: bold;
        }

        .modal-inner {
            background: #ECE9D8;
            padding: 20px;
            border: 1px solid #FFFFFF;
            border-top: none;
        }

        .modal-icon-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .warning-icon {
            width: 32px;
            height: 32px;
            background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: #000;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .modal-main-title {
            color: #003C74;
            font-size: 14px;
            font-weight: bold;
        }

        .modal-text {
            color: #000;
            font-size: 11px;
            line-height: 1.6;
            margin-bottom: 12px;
            padding-left: 44px;
        }

        .modal-text strong {
            color: #003C74;
            font-weight: bold;
        }

        .modal-text .highlight {
            background: #FFFF88;
            padding: 0 2px;
            font-weight: bold;
        }

        /* XP Style Button */
        .start-btn {
            background: linear-gradient(to bottom, #FFFFFF 0%, #ECE9D8 100%);
            border: 1px solid #003C74;
            color: #000;
            padding: 6px 14px;
            font-size: 11px;
            cursor: pointer;
            margin: 20px auto 0;
            display: block;
            border-radius: 3px;
            box-shadow: 
                inset -1px -1px 0 #716F64,
                inset 1px 1px 0 #FFFFFF;
            min-width: 75px;
        }

        .start-btn:hover {
            background: linear-gradient(to bottom, #FFE8A6 0%, #FFC73C 100%);
        }

        .start-btn:active {
            background: linear-gradient(to bottom, #E3E3DB 0%, #C7C7BF 100%);
            box-shadow: 
                inset 1px 1px 0 #716F64,
                inset -1px -1px 0 #FFFFFF;
        }

        /* DVD Player - better positioning */
        .dvd-player {
            position: absolute;
            bottom: 15%;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 300px;
            cursor: default;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.5));
            animation: playerPulse 2s ease-in-out infinite;
            z-index: 20;
        }

        .dvd-player img {
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        @keyframes playerPulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.02); }
        }

        .dvd-player.hovering {
            animation: playerPulse 0.5s ease-in-out infinite;
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.5)) 
                    drop-shadow(0 0 20px rgba(255,255,0,0.5));
        }

        /* DVD Case - better spacing */
        .dvd-case {
            position: absolute;
            width: 190px;
            height: 190px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            filter: drop-shadow(2px 4px 8px rgba(0,0,0,0.4));
        }

        /* Original case position - upper right */
        .dvd-case.main-case {
            top: 20%;
            right: 15%;
            transform: rotate(12deg);
        }

        /* Access case position - upper left */
        .dvd-case.access-case {
            top: 20%;
            left: 15%;
            transform: rotate(-8deg);
        }

        .dvd-case:hover {
            transform: rotate(12deg) translateY(-5px);
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.5));
        }

        .dvd-case.access-case:hover {
            transform: rotate(-8deg) translateY(-5px);
        }

        .dvd-case img {
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .dvd-case::after {
            content: 'CLICK TO OPEN';
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        .dvd-case.opened::after {
            content: 'DRAG DISC TO PORTAL';
            color: #ffff00;
            text-shadow: 0 0 5px #ffff00, 1px 1px 2px rgba(0,0,0,0.8);
            animation: textPulse 1s ease-in-out infinite;
        }

        @keyframes textPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        /* DVD Disc */
        .dvd-disc {
            position: absolute;
            width: 120px;
            height: 120px;
            cursor: grab;
            display: none;
            z-index: 30;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
            animation: discSpin 4s linear infinite;
            touch-action: none;
        }

        .dvd-disc.active {
            display: block;
        }

        .dvd-disc.dragging {
            cursor: grabbing;
            animation: none;
            z-index: 100;
        }

        .dvd-disc img {
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        @keyframes discSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Can't Read Button - Now a sticky note in the middle */
        .cant-read-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-2deg);
            background: #FFFF88;
            color: #000;
            border: none;
            padding: 15px 20px;
            font-family: 'Comic Sans MS', cursive;
            font-size: 14px;
            cursor: pointer;
            z-index: 100;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            max-width: 250px;
            line-height: 1.4;
        }

        .cant-read-btn::before {
            content: "";
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 20px;
            background: rgba(255,255,255,0.6);
            border: 1px solid #ccc;
        }

        .cant-read-btn:hover {
            transform: translate(-50%, -50%) rotate(0deg) scale(1.05);
            background: #FFFF00;
            box-shadow: 3px 3px 8px rgba(0,0,0,0.3);
        }

        /* Simple Instructions Modal - XP Style */
        .simple-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
        }

        .simple-modal.active {
            display: flex;
        }

        .simple-content {
            background: #ECE9D8;
            border: 2px solid #0054E3;
            border-radius: 8px;
            max-width: 400px;
            width: 100%;
            box-shadow: 
                0 0 0 1px #003C74,
                2px 2px 5px rgba(0,0,0,0.3);
        }

        .simple-titlebar {
            background: linear-gradient(to bottom, #0054E3 0%, #0046C7 3%, #0036A3 100%);
            padding: 6px;
            border-radius: 6px 6px 0 0;
            color: white;
            font-size: 13px;
            font-weight: bold;
            text-shadow: 1px 1px 0 rgba(0,0,0,0.5);
            text-align: center;
        }

        .simple-inner {
            padding: 20px;
            text-align: center;
        }

        .simple-text {
            color: #000;
            font-size: 12px;
            line-height: 1.8;
            margin-bottom: 20px;
            font-family: 'Tahoma', sans-serif;
        }

        .simple-text .venmo {
            color: #0054E3;
            font-weight: bold;
            font-size: 14px;
            display: block;
            margin: 10px 0;
            background: #FFFF88;
            padding: 5px;
        }

        .simple-close {
            background: linear-gradient(to bottom, #FFFFFF 0%, #ECE9D8 100%);
            border: 1px solid #003C74;
            color: #000;
            padding: 6px 20px;
            font-size: 11px;
            cursor: pointer;
            border-radius: 3px;
            box-shadow: 
                inset -1px -1px 0 #716F64,
                inset 1px 1px 0 #FFFFFF;
        }

        .simple-close:hover {
            background: linear-gradient(to bottom, #FFE8A6 0%, #FFC73C 100%);
        }

        /* Transition overlay */
        .transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            opacity: 0;
            pointer-events: none;
            z-index: 1000;
            transition: opacity 0.5s;
        }

        .transition-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .modal-text {
                font-size: 10px;
                padding-left: 35px;
            }

            .dvd-player {
                width: 200px;
                height: 200px;
                bottom: 20%;
            }

            .dvd-case {
                width: 120px;
                height: 120px;
            }

            .dvd-case.main-case {
                top: 15%;
                right: 5%;
            }

            .dvd-case.access-case {
                top: 15%;
                left: 5%;
            }

            .dvd-disc {
                width: 80px;
                height: 80px;
            }

            .cant-read-btn {
                font-size: 12px;
                padding: 12px 15px;
            }
        }

        /* Desktop adjustments for better spacing */
        @media (min-width: 1024px) {
            .dvd-case {
                width: 220px;
                height: 220px;
            }

            .dvd-case.main-case {
                top: 15%;
                right: 20%;
            }

            .dvd-case.access-case {
                top: 15%;
                left: 20%;
            }

            .dvd-player {
                bottom: 10%;
                width: 350px;
                height: 350px;
            }

            .dvd-disc {
                width: 140px;
                height: 140px;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Modal -->
    <div class="welcome-modal" id="welcomeModal">
        <div class="modal-content">
            <div class="xp-titlebar">
                <div class="xp-title">System Message</div>
                <div class="xp-buttons">
                    <div class="xp-button close" onclick="closeWelcome()"></div>
                </div>
            </div>
            <div class="modal-inner">
                <div class="modal-icon-title">
                    <div class="warning-icon">!</div>
                    <div class="modal-main-title">WELCOME PLAYERS!</div>
                </div>
                
                <p class="modal-text">
                    <strong>NEW PLAYERS:</strong><br>
                    Click on the <span class="highlight">START HERE</span> disc and drop it into the portal.<br>
                    Follow instructions to grab an access code.
                </p>
                
                <p class="modal-text">
                    <strong>RETURNING PLAYERS:</strong><br>
                    If you already have an access code - grab the <span class="highlight">INTERNET OLYMPICS 2</span> disc<br>
                    and I'll see ya on the other side!
                </p>
                
                <p class="modal-text" style="margin-top: 15px;">
                    Any questions? DM <strong>@kidgrandma</strong> on IG
                </p>
                
                <button class="start-btn" onclick="closeWelcome()">OK</button>
            </div>
        </div>
    </div>

    <!-- Simple Instructions Modal -->
    <div class="simple-modal" id="simpleModal">
        <div class="simple-content">
            <div class="simple-titlebar">
                worksucks.exe has stopped responding
            </div>
            <div class="simple-inner">
                <p class="simple-text">
                    hey... i get it.<br>
                    reading sucks.<br><br>
                    venmo <span class="venmo">$25 to @worksucksdotnet</span>
                    to start. easy.<br><br>
                    make sure you put your ig handle in the memo
                </p>
                <button class="simple-close" onclick="closeSimple()">ok cool</button>
            </div>
        </div>
    </div>

    <div class="scene-container"></div>

    <!-- Main DVD Case -->
    <div class="dvd-case main-case" id="dvd-case">
        <img src="assets/entrance/start-case.png" alt="Internet Olympics DVD">
    </div>

    <!-- Access DVD Case -->
    <div class="dvd-case access-case" id="access-case">
        <img src="assets/entrance/access-case.png" alt="Access Portal DVD">
    </div>

    <!-- Main DVD Disc (hidden until case clicked) -->
    <div class="dvd-disc" id="dvd-disc">
        <img src="assets/entrance/start-disc.png" alt="Internet Olympics Disc">
    </div>

    <!-- Access DVD Disc (hidden until case clicked) -->
    <div class="dvd-disc" id="access-disc">
        <img src="assets/entrance/access-disc.png" alt="Access Portal Disc">
    </div>

    <!-- DVD Player -->
    <div class="dvd-player" id="dvd-player">
        <img src="assets/entrance/disc-player.png" alt="Portable DVD Player">
    </div>

    <!-- Can't Read Button - Now styled as sticky note -->
    <button class="cant-read-btn" onclick="openSimple()">
        ugh reading is hard<br>
        just tell me what 2 do<br>
        this is confusing :(
    </button>

    <!-- Transition overlay -->
    <div class="transition-overlay"></div>

    <!-- Audio elements -->
    <audio id="bgMusic" loop>
        <source src="assets/entrance/entrance.mp3" type="audio/mpeg">
    </audio>
    <audio id="discOpen">
        <source src="assets/entrance/disc-open.mp3" type="audio/mpeg">
    </audio>
    <audio id="discPickup">
        <source src="assets/entrance/disc-pickup.mp3" type="audio/mpeg">
    </audio>
    <audio id="portalActivate">
        <source src="assets/entrance/portal-activate.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Audio setup
        const sounds = {
            bgMusic: document.getElementById('bgMusic'),
            discOpen: document.getElementById('discOpen'),
            discPickup: document.getElementById('discPickup'),
            portalActivate: document.getElementById('portalActivate')
        };

        sounds.bgMusic.volume = 0.2;

        // Welcome modal functions
        function closeWelcome() {
            document.getElementById('welcomeModal').classList.add('hidden');
            // Start music after user interaction
            sounds.bgMusic.play().catch(e => console.log('Music autoplay prevented'));
        }

        // Simple modal functions
        function openSimple() {
            document.getElementById('simpleModal').classList.add('active');
        }

        function closeSimple() {
            document.getElementById('simpleModal').classList.remove('active');
            // Also ensure music is playing
            if (sounds.bgMusic.paused) {
                sounds.bgMusic.play().catch(e => console.log('Music autoplay prevented'));
            }
        }

        // Elements
        const dvdCase = document.getElementById('dvd-case');
        const dvdDisc = document.getElementById('dvd-disc');
        const accessCase = document.getElementById('access-case');
        const accessDisc = document.getElementById('access-disc');
        const dvdPlayer = document.getElementById('dvd-player');

        // Case click handler for both cases
        function setupCase(caseElement, discElement, destination) {
            caseElement.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Don't re-open if already opened
                if (this.classList.contains('opened')) return;
                
                // Play open sound
                sounds.discOpen.currentTime = 0;
                sounds.discOpen.play();
                
                // Mark as opened
                this.classList.add('opened');
                
                // Position disc to emerge from case
                const caseRect = this.getBoundingClientRect();
                const slideDistance = 30;
                
                discElement.style.left = (caseRect.left + slideDistance) + 'px';
                discElement.style.top = (caseRect.top - slideDistance) + 'px';
                discElement.classList.add('active');
                
                // Animate slide out
                setTimeout(() => {
                    discElement.style.transition = 'left 0.5s ease-out, top 0.5s ease-out';
                    discElement.style.left = (caseRect.left + caseRect.width/2 - discElement.offsetWidth/2) + 'px';
                    discElement.style.top = (caseRect.top - discElement.offsetHeight) + 'px';
                    
                    // Enable dragging after animation
                    setTimeout(() => {
                        discElement.style.transition = '';
                        enableDragging(discElement, destination);
                    }, 500);
                }, 50);
            });
        }

        // Set up both cases
        setupCase(dvdCase, dvdDisc, './cast/character.html');
        setupCase(accessCase, accessDisc, './access/');

        // Dragging functionality
        function enableDragging(disc, destination) {
            let isDragging = false;
            let startX, startY, initialX, initialY;

            function dragStart(e) {
                if (e.target === disc || e.target.parentElement === disc) {
                    e.preventDefault();
                    isDragging = true;
                    disc.classList.add('dragging');
                    
                    // Play pickup sound
                    sounds.discPickup.currentTime = 0;
                    sounds.discPickup.play();
                    
                    // Get initial positions
                    const rect = disc.getBoundingClientRect();
                    initialX = rect.left;
                    initialY = rect.top;
                    
                    if (e.type === "touchstart") {
                        startX = e.touches[0].clientX - initialX;
                        startY = e.touches[0].clientY - initialY;
                    } else {
                        startX = e.clientX - initialX;
                        startY = e.clientY - initialY;
                    }
                }
            }

            function dragEnd(e) {
                if (!isDragging) return;
                
                isDragging = false;
                disc.classList.remove('dragging');
                
                // Check if over DVD player
                const playerRect = dvdPlayer.getBoundingClientRect();
                const discRect = disc.getBoundingClientRect();
                
                const discCenterX = discRect.left + discRect.width / 2;
                const discCenterY = discRect.top + discRect.height / 2;
                
                // Check if disc center is within player bounds
                if (discCenterX > playerRect.left && 
                    discCenterX < playerRect.right && 
                    discCenterY > playerRect.top && 
                    discCenterY < playerRect.bottom) {
                    // Activate portal with specific destination!
                    activatePortal(destination);
                }
                
                // Remove hovering effect
                dvdPlayer.classList.remove('hovering');
            }

            function drag(e) {
                if (!isDragging) return;
                
                e.preventDefault();
                
                let currentX, currentY;
                if (e.type === "touchmove") {
                    currentX = e.touches[0].clientX - startX;
                    currentY = e.touches[0].clientY - startY;
                } else {
                    currentX = e.clientX - startX;
                    currentY = e.clientY - startY;
                }
                
                // Update disc position
                disc.style.left = currentX + 'px';
                disc.style.top = currentY + 'px';
                
                // Check proximity to player
                const playerRect = dvdPlayer.getBoundingClientRect();
                const discRect = disc.getBoundingClientRect();
                
                const discCenterX = discRect.left + discRect.width / 2;
                const discCenterY = discRect.top + discRect.height / 2;
                
                // Add hovering effect when near
                if (discCenterX > playerRect.left - 50 && 
                    discCenterX < playerRect.right + 50 && 
                    discCenterY > playerRect.top - 50 && 
                    discCenterY < playerRect.bottom + 50) {
                    dvdPlayer.classList.add('hovering');
                } else {
                    dvdPlayer.classList.remove('hovering');
                }
            }

            // Mouse events
            disc.addEventListener('mousedown', dragStart);
            document.addEventListener('mouseup', dragEnd);
            document.addEventListener('mousemove', drag);

            // Touch events
            disc.addEventListener('touchstart', dragStart, { passive: false });
            document.addEventListener('touchend', dragEnd, { passive: false });
            document.addEventListener('touchmove', drag, { passive: false });
        }

        // Portal activation
        function activatePortal(destination) {
            // Stop all sounds
            Object.values(sounds).forEach(sound => {
                sound.pause();
                sound.currentTime = 0;
            });

            // Play activation sound
            sounds.portalActivate.currentTime = 0;
            sounds.portalActivate.play();
            
            // Fade to black
            const overlay = document.querySelector('.transition-overlay');
            overlay.classList.add('active');
            
            // Navigate to specific destination
            setTimeout(() => {
                window.location.href = destination;
            }, 1000);
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            Object.values(sounds).forEach(sound => {
                sound.pause();
                sound.src = '';
            });
        });
    </script>
</body>
</html>